
<ion-view view-title="个人考勤二维码" >
  <ion-content ng-class="center">
   <!-- <h1>我的二维码</h1>-->

<div id="code" ng-class="center"></div>
  </ion-content>
</ion-view>

<script>
  //$('#code').qrcode("http://www.helloweba.com"); //任意字符串

function test(ewm)
{
console.log(ewm);
  var str = toUtf8(ewm);
  $('#code').qrcode(str);
}
  function toUtf8(str) {
    var out, i, len, c;
    out = "";
    len = str.length;
    for(i = 0; i < len; i++) {
      c = str.charCodeAt(i);
      if ((c >= 0x0001) && (c <= 0x007F)) {
        out += str.charAt(i);
      } else if (c > 0x07FF) {
        out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F));
        out += String.fromCharCode(0x80 | ((c >>  6) & 0x3F));
        out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));
      } else {
        out += String.fromCharCode(0xC0 | ((c >>  6) & 0x1F));
        out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));
      }
    }
    return out;
  }
</script>
